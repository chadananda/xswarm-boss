# xSwarm Secrets (NEVER COMMIT THIS FILE)
# Copy this file to .env and fill in your API keys
#
# IMPORTANT: This file contains ALL secrets and configuration
# User data is stored in Turso database (not config files)

# =============================================================================
# Environment (Optional - defaults to auto-detection)
# =============================================================================
# Set to: development, staging, or production
# If not set, will auto-detect from NODE_ENV or runtime context
# ENVIRONMENT=development

# =============================================================================
# AI Provider API Keys (REQUIRED)
# =============================================================================

# Anthropic API (Claude)
# https://console.anthropic.com/
# Used for: Claude Code MCP, text responses, memory summarization
ANTHROPIC_API_KEY=sk-ant-xxxxx...

# OpenAI API
# https://platform.openai.com/
# Used for: Vector embeddings for semantic search (text-embedding-3-small)
OPENAI_API_KEY=sk-xxxxx...

# =============================================================================
# Twilio API Secrets (Voice & SMS) (REQUIRED)
# =============================================================================
# Get credentials from console.twilio.com
# Note: Account SIDs (ACxxxx...) are NOT secrets - they go in config.toml
#
# Usage: Test keys used in development (or with --test flag)
#        Live keys used in production (when test keys not present)

# Test Account (Development)
TWILIO_AUTH_TOKEN_TEST=your_test_auth_token_here

# Live Account (Production - DO NOT set in development!)
TWILIO_AUTH_TOKEN_LIVE=your_live_auth_token_here

# =============================================================================
# SendGrid API Secret (Email + Error Reports) (REQUIRED)
# =============================================================================
# Get API key from sendgrid.com
# Used for: User emails, daily error reports to admin
#
# Usage: Test key used in development (or with --test flag)
#        Live key used in production (when test key not present)

# Test API Key (Development - can use sandbox mode or separate subuser)
SENDGRID_API_KEY_TEST=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Live API Key (Production - DO NOT set in development!)
SENDGRID_API_KEY_LIVE=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# =============================================================================
# Stripe API Secrets (Payments & Subscriptions) (REQUIRED)
# =============================================================================
# Get API keys from dashboard.stripe.com
# Note: Publishable key and price IDs are in config.toml (not secret)
#
# Usage: Test keys used in development (or with --test flag)
#        Live keys used in production (when test keys not present)

# Test Mode Secret Key (Development)
STRIPE_SECRET_KEY_TEST=***REMOVED***

# Live Mode Secret Key (Production - DO NOT set in development!)
STRIPE_SECRET_KEY_LIVE=***REMOVED***

# -----------------------------------------------------------------------------
# Webhook Signing Secrets (THREE different secrets for different use cases)
# -----------------------------------------------------------------------------

# 1. LOCAL DEVELOPMENT WEBHOOK SECRET (TEMPORARY - changes every session)
# -------------------------------------------------------------------------
# When: Running local server with webhook testing (pnpm dev:webhooks)
# How to get it:
#   1. Run: pnpm dev:webhooks
#   2. Copy the "whsec_..." shown in terminal output
#   3. Paste here (optional - only if testing webhooks locally)
# Expires: When you stop pnpm dev:webhooks (NOT permanent)
# Use: Only for local development with Stripe CLI forwarding
#
# STRIPE_WEBHOOK_SECRET_LOCAL=***REMOVED***

# 2. PRODUCTION TEST MODE WEBHOOK SECRET (PERMANENT - for deployed app)
# ----------------------------------------------------------------------
# When: After deploying to Cloudflare Workers (production deployment)
# How to get it:
#   1. Deploy your app: pnpm deploy:server
#   2. Run: pnpm setup:webhooks
#   3. Script creates webhook endpoint on Stripe
#   4. Script automatically pushes this secret to Cloudflare Workers
#   5. You don't need to manually add it here (optional for reference)
# Expires: Never (permanent until you delete the webhook in Stripe)
# Use: Production deployment in Stripe test mode
#
# STRIPE_WEBHOOK_SECRET_TEST=whsec_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# 3. PRODUCTION LIVE MODE WEBHOOK SECRET (PERMANENT - for live payments)
# -----------------------------------------------------------------------
# When: Ready to accept real payments (production deployment, live mode)
# How to get it:
#   1. Ensure your app is deployed and tested in test mode
#   2. Run: pnpm setup:webhooks --live
#   3. Script creates webhook endpoint for live mode on Stripe
#   4. Script automatically pushes this secret to Cloudflare Workers
#   5. You don't need to manually add it here (optional for reference)
# Expires: Never (permanent until you delete the webhook in Stripe)
# Use: Production deployment accepting real payments
#
# STRIPE_WEBHOOK_SECRET_LIVE=***REMOVED***

# -----------------------------------------------------------------------------
# Summary: Which webhook secret should I use?
# -----------------------------------------------------------------------------
# LOCAL DEVELOPMENT:      STRIPE_WEBHOOK_SECRET_LOCAL (temporary, optional)
# PRODUCTION (test mode): STRIPE_WEBHOOK_SECRET_TEST  (permanent, automated)
# PRODUCTION (live mode): STRIPE_WEBHOOK_SECRET_LIVE  (permanent, automated)
#
# Note: Production webhook secrets are automatically managed by the deployment
# process. You typically only need to manually set the LOCAL secret when
# testing webhooks during development.

# =============================================================================
# Google OAuth (Gmail Integration) (OPTIONAL)
# =============================================================================
# Create OAuth credentials at: https://console.cloud.google.com/apis/credentials
# Used for: Gmail integration, email management, AI email summarization
#
# Steps to get credentials:
# 1. Go to Google Cloud Console → APIs & Services → Credentials
# 2. Create OAuth 2.0 Client ID (Application type: Web application)
# 3. Add authorized redirect URI: https://your-domain.com/api/email/auth/callback
# 4. Copy Client ID and Client Secret here

GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-your_google_client_secret
GOOGLE_REDIRECT_URI=https://your-domain.com/api/email/auth/callback

# =============================================================================
# Turso Database Secret (User Data + Error Logs) (REQUIRED)
# =============================================================================
# Get auth token from: turso db tokens create xswarm-users
# Note: Database URL (libsql://...) is NOT a secret - it goes in config.toml

TURSO_AUTH_TOKEN=eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9...

# =============================================================================
# JWT Authentication Secret (User Sessions) (REQUIRED)
# =============================================================================
# Generate a secure random string for JWT token signing
# Example: openssl rand -base64 64
# IMPORTANT: Keep this secret secure! Never commit to version control!
# Used for: Signing and verifying JWT authentication tokens

JWT_SECRET=your_super_secret_jwt_key_here_generate_with_openssl_rand_base64_64

# =============================================================================
# Development Admin Credentials (DEVELOPMENT ONLY - Required for --dev mode)
# =============================================================================
# These credentials enable admin-level access when running with --dev flag
# They bypass normal authentication for faster development iteration
#
# SECURITY WARNINGS:
# - These provide FULL ADMIN ACCESS to your xSwarm instance
# - Keep these credentials SECRET - never commit actual values to git
# - Only works when BOTH variables are set and email matches config.toml
# - Automatically disabled in production (only works with --dev flag)
# - Use for local development ONLY
#
# Setup Instructions:
# 1. Set email to match admin email in config.toml (default: admin@xswarm.dev)
# 2. Set a password (any length, but keep it secure)
# 3. Copy both values to your .env file (NOT this .env.example)
# 4. Start server with --dev flag to enable bypass authentication
#
# Usage: When both are set and email matches config.toml, dev mode activates
# Example: cargo run -- --dev

XSWARM_DEV_ADMIN_EMAIL=admin@xswarm.dev
XSWARM_DEV_ADMIN_PASS=your_password_here

# =============================================================================
# Authentication Configuration (Optional - Defaults Provided)
# =============================================================================
# Base URL for email verification links (defaults to https://xswarm.ai)
BASE_URL=https://xswarm.ai

# From email address for transactional emails (defaults to noreply@xswarm.ai)
FROM_EMAIL=noreply@xswarm.ai

# =============================================================================
# Cloudflare R2 Storage (Assets & Backups) (REQUIRED)
# =============================================================================
# Create R2 API token at: dash.cloudflare.com → R2 → Manage R2 API Tokens
# Used for: User-uploaded assets, marketing materials, database backups

S3_ACCESS_KEY_ID=your_access_key_here
S3_SECRET_ACCESS_KEY=your_secret_access_key_here

# =============================================================================
# Cloudflare API Token (Workers Deployment) (REQUIRED)
# =============================================================================
# Create API token at: dash.cloudflare.com → My Profile → API Tokens
# Permissions needed: Workers Scripts:Edit, Workers KV Storage:Edit
# Used for: Automated deployment via wrangler

CLOUDFLARE_API_TOKEN=your_cloudflare_api_token_here

# =============================================================================
# Optional: Advanced Features (NOT REQUIRED FOR MVP)
# =============================================================================

# Remote GPU Inference Providers (optional - for remote GPU fallback)
# RUNPOD_API_KEY=your_runpod_api_key_here
# MODAL_TOKEN_ID=your_modal_token_id
# MODAL_TOKEN_SECRET=your_modal_token_secret

# Advanced Voice Pipeline (optional - if not using OpenAI Realtime)
# ELEVENLABS_API_KEY=your_elevenlabs_key_here
# DEEPGRAM_API_KEY=your_deepgram_key_here

# Remote Meilisearch (optional - if not using local instance)
# MEILI_MASTER_KEY=your_meili_key_here
